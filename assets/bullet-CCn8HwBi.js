import{o as M,c as T,b as o,n as W,K as Y,e as J,r as u,A,z as O,f as z,L as Z,M as D,N as P,J as j,B as G,C as _,u as L,i as $,w as ee,l as te,y as ne,F as ae,p as se,a as oe,_ as le}from"./index-Acd9_127.js";import{a as ue,g as de}from"./comment-DBUUXFS_.js";import"./request-ZaKeb_ww.js";const ie="/assets/bag-DuL5olJ7.png",re="data:image/png;base64,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";var q=J({name:"vue3-danmaku",components:{},props:{danmus:{type:Array,required:!0,default:()=>[]},channels:{type:Number,default:0},autoplay:{type:Boolean,default:!0},loop:{type:Boolean,default:!1},useSlot:{type:Boolean,default:!1},debounce:{type:Number,default:100},speeds:{type:Number,default:200},randomChannel:{type:Boolean,default:!1},fontSize:{type:Number,default:18},top:{type:Number,default:4},right:{type:Number,default:0},isSuspend:{type:Boolean,default:!1},extraStyle:{type:String,default:""}},emits:["list-end","play-end","dm-over","dm-out","update:danmus"],setup(n,{emit:p,slots:I}){let i=u(document.createElement("div")),a=u(document.createElement("div"));const r=u(0),Q=u(0);let b=0;const g=u(0),w=u(0),m=u(0),f=u(!1),y=u(!1),B=u({}),d=function(s,l,e="modelValue",t){return A({get:()=>s[e],set:E=>{l(`update:${e}`,E)}})}(n,p,"danmus"),v=O({channels:A(()=>n.channels||g.value),autoplay:A(()=>n.autoplay),loop:A(()=>n.loop),useSlot:A(()=>n.useSlot),debounce:A(()=>n.debounce),randomChannel:A(()=>n.randomChannel)}),c=O({height:A(()=>w.value),fontSize:A(()=>n.fontSize),speeds:A(()=>n.speeds),top:A(()=>n.top),right:A(()=>n.right)});function k(){C(),n.isSuspend&&function(){let s=[];a.value.addEventListener("mouseover",l=>{let e=l.target;e.className.includes("dm")||(e=e.closest(".dm")||e),e.className.includes("dm")&&(s.includes(e)||(p("dm-over",{el:e}),e.classList.add("pause"),s.push(e)))}),a.value.addEventListener("mouseout",l=>{let e=l.target;e.className.includes("dm")||(e=e.closest(".dm")||e),e.className.includes("dm")&&(p("dm-out",{el:e}),e.classList.remove("pause"),s.forEach(t=>{t.classList.remove("pause")}),s=[])})}(),v.autoplay&&R()}function C(){if(r.value=i.value.offsetWidth,Q.value=i.value.offsetHeight,r.value===0||Q.value===0)throw new Error("获取不到容器宽高")}function R(){y.value=!1,b||(b=window.setInterval(()=>function(){if(!y.value&&d.value.length)if(m.value>d.value.length-1){const s=a.value.children.length;v.loop&&(s<m.value&&(p("list-end"),m.value=0),V())}else V()}(),v.debounce))}function V(s){const l=v.loop?m.value%d.value.length:m.value,e=s||d.value[l];let t=document.createElement("div");v.useSlot?t=function(E,h){return D({render:()=>P("div",{},[I.dm&&I.dm({danmu:E,index:h})])}).mount(document.createElement("div"))}(e,l).$el:(t.innerHTML=e,t.setAttribute("style",n.extraStyle),t.style.fontSize=`${c.fontSize}px`,t.style.lineHeight=`${c.fontSize}px`),t.classList.add("dm"),a.value.appendChild(t),t.style.opacity="0",j(()=>{c.height||(w.value=t.offsetHeight),v.channels||(g.value=Math.floor(Q.value/(c.height+c.top)));let E=function(h){let S=[...Array(v.channels).keys()];v.randomChannel&&(S=S.sort(()=>.5-Math.random()));for(let x of S){const F=B.value[x];if(!F||!F.length)return B.value[x]=[h],h.addEventListener("animationend",()=>B.value[x].splice(0,1)),x%v.channels;for(let U=0;U<F.length;U++){const H=X(F[U])-10;if(H<=.88*(h.offsetWidth-F[U].offsetWidth)||H<=0)break;if(U===F.length-1)return B.value[x].push(h),h.addEventListener("animationend",()=>B.value[x].splice(0,1)),x%v.channels}}return-1}(t);if(E>=0){const h=t.offsetWidth,S=c.height;t.classList.add("move"),t.dataset.index=`${l}`,t.dataset.channel=E.toString(),t.style.opacity="1",t.style.top=E*(S+c.top)+"px",t.style.width=h+c.right+"px",t.style.setProperty("--dm-scroll-width",`-${r.value+h}px`),t.style.left=`${r.value}px`,t.style.animationDuration=r.value/c.speeds+"s",t.addEventListener("animationend",()=>{Number(t.dataset.index)!==d.value.length-1||v.loop||p("play-end",t.dataset.index),a.value&&a.value.removeChild(t)}),m.value++}else a.value.removeChild(t)})}function X(s){const l=s.offsetWidth||parseInt(s.style.width),e=s.getBoundingClientRect().right||a.value.getBoundingClientRect().right+l;return a.value.getBoundingClientRect().right-e}function N(){clearInterval(b),b=0,m.value=0}return z(()=>{k()}),Z(()=>{N()}),{container:i,dmContainer:a,hidden:f,paused:y,danmuList:d,getPlayState:function(){return!y.value},resize:function(){C();const s=a.value.getElementsByClassName("dm");for(let l=0;l<s.length;l++){const e=s[l];e.style.setProperty("--dm-scroll-width",`-${r.value+e.offsetWidth}px`),e.style.left=`${r.value}px`,e.style.animationDuration=r.value/c.speeds+"s"}},play:R,pause:function(){y.value=!0},stop:function(){B.value={},a.value.innerHTML="",y.value=!0,f.value=!1,N()},show:function(){f.value=!1},hide:function(){f.value=!0},reset:function(){w.value=0,k()},add:function(s){if(m.value===d.value.length)return d.value.push(s),d.value.length-1;{const l=m.value%d.value.length;return d.value.splice(l,0,s),l+1}},push:function(s){return d.value.push(s),d.value.length-1},insert:V}}});const ce={ref:"container",class:"vue-danmaku"};(function(n,p){p===void 0&&(p={});var I=p.insertAt;if(typeof document<"u"){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",I==="top"&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n))}})(`.vue-danmaku {
  position: relative;
  overflow: hidden;
}
.vue-danmaku .danmus {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  opacity: 0;
  -webkit-transition: all 0.3s;
  transition: all 0.3s;
}
.vue-danmaku .danmus.show {
  opacity: 1;
}
.vue-danmaku .danmus.paused .dm.move {
  animation-play-state: paused;
}
.vue-danmaku .danmus .dm {
  position: absolute;
  font-size: 20px;
  color: #ddd;
  white-space: pre;
  transform: translateX(0);
  transform-style: preserve-3d;
}
.vue-danmaku .danmus .dm.move {
  will-change: transform;
  animation-name: moveLeft;
  animation-timing-function: linear;
  animation-play-state: running;
}
.vue-danmaku .danmus .dm.pause {
  animation-play-state: paused;
  z-index: 100;
}
@keyframes moveLeft {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(var(--dm-scroll-width));
  }
}
@-webkit-keyframes moveLeft {
  from {
    -webkit-transform: translateX(0);
  }
  to {
    -webkit-transform: translateX(var(--dm-scroll-width));
  }
}`),q.render=function(n,p,I,i,a,r){return M(),T("div",ce,[o("div",{ref:"dmContainer",class:W(["danmus",{show:!n.hidden},{paused:n.paused}])},null,2),Y(n.$slots,"default")],512)},q.__file="src/lib/Danmaku.vue";const K=n=>(se("data-v-0b1ae300"),n=n(),oe(),n),me={class:"message-form","data-v-21971730":""},ve=K(()=>o("div",{class:"message-form__title","data-v-21971730":""},"留言墙",-1)),pe={class:"message-form__content","data-v-21971730":""},Ae=K(()=>o("br",null,null,-1)),fe={class:"baberrage"},he={class:"danmaku-name"},ge={class:"bullet-item"},ye=K(()=>o("img",{src:ie,alt:""},null,-1)),Be=["innerHTML"],Ce={key:0,class:"success-box"},Ie=K(()=>o("img",{src:re,alt:""},null,-1)),be=K(()=>o("span",null,"发布成功",-1)),we=[Ie,be],ke=J({__name:"bullet",setup(n){const p=u(["rgb(204,255,255)","white","rgb(204,255,204)","white","rgb(0,255,255)","white","rgb(255,204,255)","pink"]);function I(){return p.value[Math.floor(Math.random()*8)]}const i=O(["danmu1","danmu2","danmu3","danmu4","danmu5","danmu6","danmu7","danmu8"]);let a=u(!1),r=u({commentPeople:"实验室",commentContent:""});function Q(){ue(r.value).then(()=>{b()}),r.value.commentContent="",a.value=!0,setTimeout(()=>{a.value=!1},2e3)}async function b(){await de().then(({data:c})=>{i.splice(0,i.length,...c.data)})}z(()=>{b()});const g=u(200),w=u(!0),m=u(!0),f=u(null),y=()=>{w.value=!w.value,w.value?f.value.play():f.value.pause()},B=()=>{m.value=!m.value,m.value?f.value.show():f.value.hide()},d=()=>{console.log(g.value),g.value+=20},v=()=>{console.log(g.value),g.value-=20};return(c,k)=>(M(),T(ae,null,[o("div",me,[ve,o("div",pe,[G(o("input",{type:"text","onUpdate:modelValue":k[0]||(k[0]=C=>L(r).commentContent=C),id:"bubble_txt",max:"25",autocomplete:"off",placeholder:"留下点什么吧，最多25个字～","data-v-21971730":""},null,512),[[_,L(r).commentContent]]),o("button",{type:"button",id:"bubble_btn",onClick:Q,"data-v-21971730":""},"发射"),Ae]),o("div",{class:"control"},[o("button",{type:"button",id:"bubble_btn",onClick:y,"data-v-21971730":""},"暂停/播放"),o("button",{type:"button",id:"bubble_btn",onClick:d,"data-v-21971730":""},"加速"),o("button",{type:"button",id:"bubble_btn",onClick:v,"data-v-21971730":""},"减速"),o("button",{type:"button",id:"bubble_btn",onClick:B,"data-v-21971730":""},"显示/隐藏")])]),o("div",fe,[$(L(q),{class:"danmaku",ref_key:"danmaku",ref:f,danmus:i,"onUpdate:danmus":k[1]||(k[1]=C=>i=C),isSuspend:!0,top:20,useSlot:"",loop:"",speeds:g.value,channels:12},{dm:ee(({danmu:C})=>[o("div",he,[o("div",ge,[ye,o("span",{style:te({color:I()}),innerHTML:C.commentContent},null,12,Be)])])]),_:1},8,["danmus","speeds"])]),L(a)?(M(),T("div",Ce,we)):ne("",!0)],64))}}),Fe=le(ke,[["__scopeId","data-v-0b1ae300"]]);export{Fe as default};
