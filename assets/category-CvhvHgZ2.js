/* empty css             *//* empty css                   *//* empty css                     *//* empty css                        */import"./el-tooltip-l0sNRNKZ.js";/* empty css                     *//* empty css               *//* empty css                  *//* empty css                 */import{d as M,g as Y,a as z,u as U}from"./category-C8RLufTB.js";import{e as A,r as g,z as S,A as q,f as Q,o as R,c as j,b as _,i as e,w as o,u as n,a7 as G,d as r,t as h,D as C,F as H,a8 as y,a9 as J,Q as K,a0 as L,ac as O,ad as P,ai as W,ak as X,am as Z,_ as ee}from"./index-Acd9_127.js";import"./request-ZaKeb_ww.js";const te={class:"search"},ae={class:"search__left"},le={class:"search__left-item"},oe={class:"search__right"},se=A({__name:"category",setup(ne){let s=g(!1);const V=t=>![1,31].includes(t.id);let d=g({categoryName:""}),i=!0;const E=()=>{i=!1,s.value=!0},w=(t,l)=>{i=!0,d.value=l,s.value=!0},k=(t,l)=>{M(l._id).then(()=>{y({message:"删除成功",type:"success"}),f()})};let p=S([]);async function f(){try{const t=await Y();p.splice(0,p.length,...t.data.data)}catch(t){console.error("获取文章列表失败:",t)}}const u=g(""),x=q(()=>p.filter(t=>!u.value||t.title.includes(u.value)));Q(()=>{f()});const D=t=>{t()},N=t=>{i||z(t).then(()=>{y({message:"添加成功",type:"success"}),f()}),i&&U(t).then(()=>{y({message:"编辑成功",type:"success"})}),s.value=!1};return(t,l)=>{const v=J,T=K,m=L,c=O,$=P,b=W,B=X,F=Z;return R(),j(H,null,[_("div",te,[_("div",ae,[_("div",le,[e(v,{modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=a=>u.value=a),clearable:"",placeholder:"输入分类名称"},null,8,["modelValue"])])]),_("div",oe,[e(m,{type:"primary",onClick:E},{default:o(()=>[e(T,{class:"el-icon--left"},{default:o(()=>[e(n(G))]),_:1}),r("新增 ")]),_:1})])]),e($,{data:x.value,style:{width:"100%"}},{default:o(()=>[e(c,{type:"selection",width:"55",selectable:V}),e(c,{label:"分类名称",prop:"categoryName"}),e(c,{label:"更新时间",prop:"updateTime"},{default:o(a=>[r(h(t.$moment(a.row.updateTime).format("YYYY-MM-DD hh:mm:ss")),1)]),_:1}),e(c,{label:"编辑",prop:"name"},{default:o(a=>[e(m,{size:"small",onClick:I=>w(a.$index,a.row)},{default:o(()=>[r(" 编辑 ")]),_:2},1032,["onClick"]),e(m,{size:"small",type:"danger",onClick:I=>k(a.$index,a.row)},{default:o(()=>[r(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(F,{modelValue:n(s),"onUpdate:modelValue":l[4]||(l[4]=a=>C(s)?s.value=a:s=a),title:n(i)?"编辑":"新增",width:"500","before-close":D},{default:o(()=>[e(B,{model:n(d),"label-width":"auto",style:{"max-width":"800px"}},{default:o(()=>[e(b,{label:"分类名称"},{default:o(()=>[e(v,{modelValue:n(d).categoryName,"onUpdate:modelValue":l[1]||(l[1]=a=>n(d).categoryName=a)},{default:o(()=>[r(h(t.query.form.categoryName),1)]),_:1},8,["modelValue"])]),_:1}),e(b,null,{default:o(()=>[e(m,{type:"primary",onClick:l[2]||(l[2]=a=>N(n(d)))},{default:o(()=>[r("提交")]),_:1}),e(m,{onClick:l[3]||(l[3]=a=>C(s)?s.value=!1:s=!1)},{default:o(()=>[r("取消")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])],64)}}}),be=ee(se,[["__scopeId","data-v-495c988e"]]);export{be as default};
