import{_ as x,H as D,r as h,A as N,z as H,f as j,h as B,o as m,c as r,i as P,b as e,t as l,d as p,u as y,w as F,B as f,C,F as T,j as S,I as U,y as M,p as A,a as E}from"./index-Acd9_127.js";import{_ as O}from"./back-image-DlzoBvf2.js";import{b as R}from"./backTop-BptznFIf.js";import{b as Z}from"./index-DP2s6OXS.js";import{a as Y,g as z}from"./comment-DBUUXFS_.js";import"./request-ZaKeb_ww.js";const a=u=>(A("data-v-c81589f1"),u=u(),E(),u),X={class:"container"},q={class:"banner"},G=["alt"],J={class:"poster-info"},K={class:"poster-title"},Q={class:"poster-performance"},W=a(()=>e("li",{class:"performance__item"},[e("span",{class:"yyc yy-bear"}),p(),e("span",null,"张艺欣")],-1)),ee={class:"performance__item"},te=a(()=>e("span",{class:"yyc yy-date"},null,-1)),oe={class:"performance__item"},se=a(()=>e("span",{class:"yyc yy-fire"},null,-1)),ne={class:"performance__item"},le=a(()=>e("span",{class:"yyc yy-comment"},null,-1)),ae=a(()=>e("li",{class:"performance__item"},[e("span",{class:"yyc yy-heart"}),p(),e("span",null,"YYF")],-1)),ce={class:"poster-wrap"},ie=["innerHTML"],me={class:"poster-update"},re=a(()=>e("div",{class:"poster-notice"},[e("span",null,"作者：张艺欣 ZZX"),e("span",null,"声明：转载请注明文章出处")],-1)),de={class:"poster-comment"},pe=a(()=>e("div",{class:"comment-title"},[e("span",{class:"yyc yy-edit"}),e("span",null,"评论")],-1)),ue={class:"comment-nickname-wrapper"},_e={class:"comment-input"},ve={class:"comment-submit"},he=a(()=>e("div",{class:"comment-emoji"},[e("span",{class:"yyp yy-emoji"})],-1)),ye={key:0,class:"comment-none"},fe=a(()=>e("i",null,"来发第一个评论啦～",-1)),Ce=[fe],ge={key:1,class:"comment-list"},ke={class:"comment-total"},be={class:"comment-item-info"},we={class:"info-left"},Pe={class:"nickname"},Te={key:0,class:"ownertag"},Me=a(()=>e("span",{class:"datetime"},"2024-12-06",-1)),Ye=["onClick"],Ie=["innerHTML"],Le={class:"content"},Ve={class:"dialog-title"},$e={class:"dialog-bodys"},xe={class:"comment-nickname-wrapper"},De={class:"comment-input"},Ne={class:"dialog-foots"},He={__name:"detail",setup(u){const g=D(),_=g.params.id,c=h([]),i=h({commentPeople:"",commentContent:"",articleId:`${g.params.id}`,articleTitle:""}),n=h({replyPeople:"",commentPeople:"",commentContent:"",articleId:`${g.params.id}`,articleTitle:""});let v=N(()=>k.filter(t=>t.articleId==_)),k=H([]);const I=v.length,d=h(!1);function b(t){if(console.log(t),t.replyPeople){const o=`<span class="mention">@${t.replyPeople}</span>`;t.commentContent=o+"  "+t.commentContent,Y(t).then(()=>{d.value=!1,k.push(t)})}else Y(t).then(()=>{d.value=!1,i.value.commentContent="",w()})}const L=t=>{n.value.replyPeople=t,n.value.commentContent="",n.value.commentPeople="",d.value=!0};async function w(){try{const t=await z(_);Object.assign(k,t.data.data)}catch(t){console.error("获取文章列表失败:",t)}}return j(()=>{_?(Z(_).then(t=>{c.value=t.data.data,i.value.articleTitle=n.value.articleTitle=t.data.data.title}).catch(t=>{console.error("Failed to fetch article:",t)}),w()):console.warn("No article ID provided"),document.documentElement.scrollTop=document.body.scrollTop=0}),(t,o)=>{const V=B("routerLink");return m(),r(T,null,[P(R),e("div",X,[e("div",q,[e("img",{src:O,alt:c.value.title},null,8,G),e("div",J,[e("div",K,l(c.value.title),1),e("ul",Q,[W,e("li",ee,[te,p(),e("span",null,l(t.$moment(c.value.createTime).format("YYYY-MM-DD")),1)]),e("li",oe,[se,p(),e("span",null,l(c.value.viewCount),1)]),e("li",ne,[le,e("span",null,l(y(v).length),1)]),ae])])]),e("div",ce,[e("div",{class:"poster-content",innerHTML:c.value.html},null,8,ie),e("div",me,[e("span",null,"本文最后更新于 "+l(t.$moment(c.value.updateTime).format("YYYY-MM-DD")),1),e("span",null,[P(V,{to:"/search"},{default:F(()=>[p(l(c.value.categoryName),1)]),_:1})])]),re,e("div",de,[pe,e("div",ue,[f(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>i.value.commentPeople=s),class:"comment-nickname",placeholder:"昵称（最多5个字）"},null,512),[[C,i.value.commentPeople]])]),e("div",_e,[f(e("textarea",{name:"comment","onUpdate:modelValue":o[1]||(o[1]=s=>i.value.commentContent=s),cols:"30",rows:"10",placeholder:"写下点什么..."},null,512),[[C,i.value.commentContent]])]),e("div",ve,[he,e("div",{class:"comment-btn",onClick:o[2]||(o[2]=s=>b(i.value))},"提交")])]),y(I)===0?(m(),r("div",ye,Ce)):(m(),r("div",ge,[e("div",ke,"Comments | "+l(y(v).length)+" 条评论",1),(m(!0),r(T,null,S(y(v),(s,$)=>(m(),r("div",{class:"comment-list__item",key:s.id},[e("div",be,[e("div",we,[e("span",Pe,l(s.commentPeople),1),s.isOwner===1?(m(),r("span",Te,"站长")):M("",!0),Me]),e("div",{class:"info-right",onClick:je=>L(s.commentPeople)},"#"+l($+1)+" 回复",9,Ye)]),e("div",{class:"comment-item__content",innerHTML:s.commentContent},null,8,Ie)]))),128))]))])]),d.value?(m(),r("div",{key:0,class:"dialog",onMousewheel:o[7]||(o[7]=U(()=>{},["prevent"]))},[e("div",Le,[e("div",Ve,"回复："+l(n.value.replyPeople),1),e("div",$e,[e("div",xe,[f(e("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=s=>n.value.commentPeople=s),class:"comment-nickname",placeholder:"昵称（最多5个字）"},null,512),[[C,n.value.commentPeople]])]),e("div",De,[f(e("textarea",{name:"reply","onUpdate:modelValue":o[4]||(o[4]=s=>n.value.commentContent=s),cols:"30",rows:"10",placeholder:"写下点什么..."},null,512),[[C,n.value.commentContent]])])]),e("div",Ne,[e("button",{type:"button",onClick:o[5]||(o[5]=s=>d.value=!1)},"取消"),e("button",{type:"button",onClick:o[6]||(o[6]=s=>b(n.value))},"提交")])])],32)):M("",!0)],64)}}},Oe=x(He,[["__scopeId","data-v-c81589f1"]]);export{Oe as default};
