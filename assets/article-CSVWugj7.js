/* empty css             *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                        */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  *//* empty css                 */import{e as F,r as s,z as I,A as R,f as q,o as v,c as y,b as u,i as a,w as o,F as C,j as L,x as O,u as b,a7 as Q,d,t as k,D as w,k as E,a8 as G,a9 as H,aa as J,ab as K,Q as W,a0 as X,ac as Z,ad as ee,R as te}from"./index-Acd9_127.js";import{d as ae,g as le}from"./index-DP2s6OXS.js";import{g as oe}from"./category-C8RLufTB.js";import"./request-ZaKeb_ww.js";const ne={class:"search"},se={class:"search__left"},re={class:"search__left-item"},ie={class:"search__left-item"},ce={class:"search__right"},Ee=F({__name:"article",setup(ue){const x=t=>![1,31].includes(t.id),_=s();function z(){oe().then(t=>{_.value=t.data.data,console.log(_.value)})}const D=(t,l)=>{E.push({path:"/admin/article/edit",query:{form:l._id}})},V=(t,l)=>{ae(l._id).then(()=>{G({message:"删除成功",type:"success"}),p()})};let g=I([]),r=s(1),i=s(10);const f=s(1);async function p(){try{const t=await le(r.value,i.value,"");f.value=t.data.total,g.splice(0,g.length,...t.data.data)}catch(t){console.error("获取文章列表失败:",t)}}const T=()=>{p()},Y=()=>{p()},c=s(""),m=s(""),N=R(()=>g.filter(t=>c.value?t.title.includes(c.value):m.value?t.categoryName.includes(m.value):!c.value));q(()=>{p(),z()});const M=()=>{E.push("/admin/article/edit")};return(t,l)=>{const S=H,A=J,B=K,U=W,h=X,n=Z,$=ee,P=te;return v(),y(C,null,[u("div",ne,[u("div",se,[u("div",re,[a(S,{modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=e=>c.value=e),clearable:"",placeholder:"输入标题搜索"},null,8,["modelValue"])]),u("div",ie,[a(B,{clearable:"",modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=e=>m.value=e),placeholder:"全部分类",style:{width:"240px"}},{default:o(()=>[(v(!0),y(C,null,L(_.value,e=>(v(),O(A,{key:e._id,label:e.categoryName,value:e.categoryName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),u("div",ce,[a(h,{type:"primary",onClick:M},{default:o(()=>[a(U,{class:"el-icon--left"},{default:o(()=>[a(b(Q))]),_:1}),d("新增 ")]),_:1})])]),a($,{data:N.value,style:{width:"100%",height:"76%",overflow:"auto"}},{default:o(()=>[a(n,{type:"selection",width:"55",selectable:x}),a(n,{label:"文章名称",prop:"title"}),a(n,{label:"文章简介",prop:"desc"}),a(n,{label:"创建时间",prop:"createTime"},{default:o(e=>[d(k(t.$moment(e.row.createTime).format("YYYY-MM-DD hh:mm:ss")),1)]),_:1}),a(n,{label:"更新时间",prop:"updateTime"},{default:o(e=>[d(k(t.$moment(e.row.updateTime).format("YYYY-MM-DD hh:mm:ss")),1)]),_:1}),a(n,{label:"分类",prop:"categoryName"}),a(n,{label:"编辑",prop:"name"},{default:o(e=>[a(h,{size:"small",onClick:j=>D(e.$index,e.row)},{default:o(()=>[d(" 编辑 ")]),_:2},1032,["onClick"]),a(h,{size:"small",type:"danger",onClick:j=>V(e.$index,e.row)},{default:o(()=>[d(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),a(P,{background:"",layout:"total, sizes, prev, pager, next, jumper",total:f.value,"onUpdate:total":l[2]||(l[2]=e=>f.value=e),"page-size":b(i),"onUpdate:pageSize":l[3]||(l[3]=e=>w(i)?i.value=e:i=e),onCurrentChange:T,onSizeChange:Y,"current-page":b(r),"onUpdate:currentPage":l[4]||(l[4]=e=>w(r)?r.value=e:r=e),style:{"margin-top":"40px",float:"right"}},null,8,["total","page-size","current-page"])],64)}}});export{Ee as default};
